package store;

import model.Item;
import java.io.*;
import java.util.*;

public class Inventory {
    private List<Item> items = new ArrayList<>();
    private final String filePath = "data/inventory.csv";

    public Inventory() {
        loadInventory();
    }

    public List<Item> getItems() { return items; }

    // Load items from CSV file
    public void loadInventory() {
        items.clear();
        try (BufferedReader br = new BufferedReader(new FileReader(filePath))) {
            String line;
            while((line = br.readLine()) != null) {
                String[] parts = line.split(",");
                if(parts.length == 4) {
                    items.add(new Item(parts[0], parts[1],
                        Double.parseDouble(parts[2]), Integer.parseInt(parts[3])));
                }
            }
        } catch (Exception e) {
            System.out.println("Error loading inventory: " + e.getMessage());
        }
    }

    // Save updated inventory back to CSV
    public void saveInventory() {
        try (PrintWriter pw = new PrintWriter(new FileWriter(filePath))) {
            for (Item item : items) {
                pw.println(item.toString());
            }
        } catch (IOException e) {
            System.out.println("Error saving inventory: " + e.getMessage());
        }
    }

    public Item findById(String id) {
        for (Item i : items) {
            if (i.getId().equals(id)) return i;
        }
        return null;
    }
}
